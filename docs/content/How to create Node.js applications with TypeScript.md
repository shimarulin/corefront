# How to create Node.js applications with TypeScript

Two entry points:

- Node.js application - don't need TypeScript declaration output
- Node.js library - requires TypeScript declaration output

## Build a Node.js library with emit TypeScript declarations

Goal: better TypeScript support.

TLDR: Use `tsc` + [`tsc-alias`](https://github.com/justkey007/tsc-alias).

In the article "[You may not need a bundler for your NPM library](https://cmdcolin.github.io/posts/2022-05-27-youmaynotneedabundler)" , the author provides possible scenarios for the need to use a bundler. In most cases, you won't need it. In addition, in some cases, it can complicate the situation:

From Vite issues ([Building in library mode for node instead of browser, doesn't work ¬∑ Issue #13926 ¬∑ vitejs/vite ¬∑ GitHub](https://github.com/vitejs/vite/issues/13926#issuecomment-1686013974))

> ...You might want to use other tools like tsup or unbuild instead.

From [tsup](https://tsup.egoist.dev/#generate-declaration-file):

> Note that declaration files generated by any tool other than `tsc` are not guaranteed to be error-free, so it's a good idea to test the output with `tsc` or a tool like [@arethetypeswrong/cli](https://www.npmjs.com/package/@arethetypeswrong/cli) before publishing.

So, just use `tsc`. But if you use `paths`, `tsc` will not handle this. From [TypeScript: TSConfig Reference - Docs on every TSConfig option](https://www.typescriptlang.org/tsconfig#paths):

> Note that this feature does not change how import paths are emitted by `tsc`, so `paths` should only be used to inform TypeScript that another tool has this mapping and will use it at runtime or when bundling.

In the comments to the post "[Typescript alias path not resolving on build : r/typescript](https://www.reddit.com/r/typescript/comments/16qsjdl/typescript_alias_path_not_resolving_on_build/) ", user [bobbytabl3s](https://www.reddit.com/user/bobbytabl3s/) suggests the following solutions:

> 1. add an extra build step which fixes your import paths (e.g. tsc-alias)
> 2. Use a Node ESM loader that supports TSC style module loading (e.g. [tsc-module-loader](https://github.com/olalonde/tsc-module-loader) - disclosure: i wrote this)
> 3. re-write your code with Node.js compatible import paths (tip: set your `tsconfig.json`'s `module` and `moduleResolution` to `nodenext`).

In most cases, using  [`tsc-alias`](https://github.com/justkey007/tsc-alias) is easy because it does not require any special loaders for the Node.js runtime and the resulting output is supported by a broader set of development tools compared to [subpath import patterns](https://nodejs.org/api/packages.html#subpath-imports).

## Build a Node.js application without emit TypeScript declarations

Goal: better compilation time

TLDR: Use `swc`.

[SWC](https://swc.rs/) supports the latest stable TypeScript. SWC only transpiles the code and doesn't perform type checking. Therefore, it's recommended that you continue to use tsc for detecting any type errors. SWC works on file-by-file, so any code transforms that depend on understanding the full type system will not work.

General recommendation: keep your code as close to the latest JavaScript standard version as possible.

#### Enums

Don't use enums. TypeScript Handbook [Objects vs Enums](https://www.typescriptlang.org/docs/handbook/enums.html#objects-vs-enums) recommends using object with `as const` for modern TypeScript. The type inference rules that apply to other values in TypeScript don't apply to enum. During the project lifecycle, you will likely need to change interfaces, and then enums may force you to rewrite a significant portion of the project. See also:

- [Don't use Enums in Typescript, they are very dangerous üò® - DEV Community](https://dev.to/ivanzm123/dont-use-enums-in-typescript-they-are-very-dangerous-57bh)
- [We don't have to use Enums on TypeScript? „ÄêDiscussion„Äë - DEV Community](https://dev.to/taishi/we-shouldnt-use-enums-on-typescript-anymore-18d3)
- [What's up with all the enum hate lately? : r/typescript](https://www.reddit.com/r/typescript/comments/103nino/whats_up_with_all_the_enum_hate_lately/)

#### Mandatory file extensions

Follow to [ECMAScript¬Æ 2025 Language¬†Specification](https://tc39.es/ecma262/#sec-modules) and [Modules: ECMAScript modules | Node.js v20.12.1 Documentation](https://nodejs.org/docs/latest-v20.x/api/esm.html#mandatory-file-extensions) - use extensions in imports and use the `*.mjs` extension for ECMAScript modules. For TypeScript, this means that you will use the `*.mjs` file extension for imports and the `*.mts` file extension for source.

```ts
// Import from file ./library.mts
// Pay attention to the file extension
import { some } from './library.mjs'
```

